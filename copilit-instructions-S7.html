<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NA • shinyOAuth</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="NA"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">shinyOAuth</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/audit-logging.html">Audit logging and hooks</a></li>
    <li><a class="dropdown-item" href="articles/authentication-flow.html">Authentication flow</a></li>
    <li><a class="dropdown-item" href="articles/example-spotify.html">Example: Spotify login to display listening data</a></li>
    <li><a class="dropdown-item" href="articles/usage.html">Usage</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lukakoning/shinyOAuth/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NA</h1>
      <small class="dont-index">Source: <a href="https://github.com/lukakoning/shinyOAuth/blob/master/.github/copilit-instructions-S7.md" class="external-link"><code>.github/copilit-instructions-S7.md</code></a></small>
    </div>


<p>This document contains documentation about using S7; taken from the S7 vignettes.</p>
<hr><ul><li><p>Source: <a href="https://github.com/RConsortium/S7" class="external-link uri">https://github.com/RConsortium/S7</a></p></li>
<li><p>MIT license: Copyright (c) 2021 S7 authors</p></li>
</ul><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<hr><div class="section level2">
<h2 id="id_-basic-usage-of-s7-taken-from-the-s7-package-vignettes"># Basic usage of S7 (taken from the S7 package vignettes)<a class="anchor" aria-label="anchor" href="#id_-basic-usage-of-s7-taken-from-the-s7-package-vignettes"></a></h2>
<p>title: “S7 basics” output: rmarkdown::html_vignette vignette: &gt; % % % —</p>
<p><code>{r, include = FALSE} knitr::opts_chunk$set(   collapse = TRUE,   comment = "#&gt;" )</code></p>
<p>The S7 package provides a new OOP system designed to be a successor to S3 and S4. It has been designed and implemented collaboratively by the RConsortium Object-Oriented Programming Working Group, which includes representatives from R-Core, BioConductor, RStudio/tidyverse, and the wider R community.</p>
<p>This vignette gives an overview of the most important parts of S7: classes and objects, generics and methods, and the basics of method dispatch and inheritance.</p>
<p><code>{r setup} library(S7)</code></p>
</div>
<div class="section level2">
<h2 id="classes-and-objects">Classes and objects<a class="anchor" aria-label="anchor" href="#classes-and-objects"></a></h2>
<p>S7 classes have a formal definition that you create with <code>new_class()</code>. There are two arguments that you’ll use with almost every class:</p>
<ul><li>The <code>name</code> of the class, supplied in the first argument.</li>
<li>The class <code>properties</code>, the data associated with each instance of the class. The easiest way to define properties is to supply a named list where the values define the valid types of the property.</li>
</ul><p>The following code defines a simple <code>dog</code> class with two properties: a character <code>name</code> and a numeric <code>age</code>.</p>
<p><code>{r} Dog &lt;- new_class("Dog", properties = list(   name = class_character,   age = class_numeric )) Dog</code></p>
<p>S7 provides a number of built-in definitions that allow you to refer to existing base types that are not S7 classes. You can recognize these definitions because they all start with <code>class_</code>.</p>
<p>Note that I’ve assigned the return value of <code>new_class()</code> to an object with the same name as the class. This is important! That object represents the class and is what you use to construct instances of the class:</p>
<p><code>{r} lola &lt;- Dog(name = "Lola", age = 11) lola</code></p>
<p>Once you have an S7 object, you can get and set properties using <code>@</code>:</p>
<p><code>{r} lola@age &lt;- 12 lola@age</code></p>
<p>S7 automatically validates the type of the property using the type supplied in <code>new_class()</code>:</p>
<p><code>{r, error = TRUE} lola@age &lt;- "twelve"</code></p>
<p>Given an object, you can retrieve its class <code>S7_class()</code>:</p>
<p><code>{r} S7_class(lola)</code></p>
<p>S7 objects also have an S3 <code><a href="https://rdrr.io/r/base/class.html" class="external-link">class()</a></code>. This is used for compatibility with existing S3 generics and you can learn more about it in <code>vignette("compatibility")</code>.</p>
<p><code>{r} class(lola)</code></p>
<p>If you want to learn more about the details of S7 classes and objects, including validation methods and more details of properties, please see <code>vignette("classes-objects")</code>.</p>
</div>
<div class="section level2">
<h2 id="generics-and-methods">Generics and methods<a class="anchor" aria-label="anchor" href="#generics-and-methods"></a></h2>
<p>S7, like S3 and S4, is built around the idea of <strong>generic functions,</strong> or <strong>generics</strong> for short. A generic defines an interface, which uses a different implementation depending on the class of one or more arguments. The implementation for a specific class is called a <strong>method</strong>, and the generic finds that appropriate method by performing <strong>method dispatch</strong>.</p>
<p>Use <code>new_generic()</code> to create a S7 generic. In its simplest form, it only needs two arguments: the name of the generic (used in error messages) and the name of the argument used for method dispatch:</p>
<p><code>{r} speak &lt;- new_generic("speak", "x")</code></p>
<p>Like with <code>new_class()</code>, you should always assign the result of <code>new_generic()</code> to a variable with the same name as the first argument.</p>
<p>Once you have a generic, you can register methods for specific classes with <code>method(generic, class) &lt;- implementation</code>.</p>
<p><code>{r} method(speak, Dog) &lt;- function(x) {   "Woof" }</code></p>
<p>Once the method is registered, the generic will use it when appropriate:</p>
<p><code>{r} speak(lola)</code></p>
<p>Let’s define another class, this one for cats, and define another method for <code>speak()</code>:</p>
<p>```{r} Cat &lt;- new_class(“Cat”, properties = list( name = class_character, age = class_double )) method(speak, Cat) &lt;- function(x) { “Meow” }</p>
<p>fluffy &lt;- Cat(name = “Fluffy”, age = 5) speak(fluffy)</p>
<pre><code>
You get an error if you call the generic with a class that doesn't have a method:

```{r, error = TRUE}
speak(1)</code></pre>
</div>
<div class="section level2">
<h2 id="method-dispatch-and-inheritance">Method dispatch and inheritance<a class="anchor" aria-label="anchor" href="#method-dispatch-and-inheritance"></a></h2>
<p>The <code>cat</code> and <code>dog</code> classes share the same properties, so we could use a common parent class to extract out the duplicated specification. We first define the parent class:</p>
<p><code>{r} Pet &lt;- new_class("Pet",   properties = list(     name = class_character,     age = class_numeric   ) )</code></p>
<p>Then use the <code>parent</code> argument to <code>new_class:</code></p>
<p>```{r} Cat &lt;- new_class(“Cat”, parent = Pet) Dog &lt;- new_class(“Dog”, parent = Pet)</p>
<p>Cat Dog</p>
<pre><code>
Because we have created new classes, we need to recreate the existing `lola` and `fluffy` objects:

```{r}
lola &lt;- Dog(name = "Lola", age = 11)
fluffy &lt;- Cat(name = "Fluffy", age = 5)</code></pre>
<p>Method dispatch takes advantage of the hierarchy of parent classes: if a method is not defined for a class, it will try the method for the parent class, and so on until it finds a method or gives up with an error. This inheritance is a powerful mechanism for sharing code across classes.</p>
<p>```{r} describe &lt;- new_generic(“describe”, “x”) method(describe, Pet) &lt;- function(x) { paste0(<a href="mailto:x@name" class="email">x@name</a>, ” is “, <a href="mailto:x@age" class="email">x@age</a>,” years old”) } describe(lola) describe(fluffy)</p>
<p>method(describe, Dog) &lt;- function(x) { paste0(<a href="mailto:x@name" class="email">x@name</a>, ” is a “, <a href="mailto:x@age" class="email">x@age</a>,” year old dog”) } describe(lola) describe(fluffy)</p>
<pre><code>
You can define a fallback method for any S7 object by registering a method for `S7_object`:

```{r}
method(describe, S7_object) &lt;- function(x) {
  "An S7 object"
}

Cocktail &lt;- new_class("Cocktail",
  properties = list(
    ingredients = class_character
  )
)
martini &lt;- Cocktail(ingredients = c("gin", "vermouth"))
describe(martini)</code></pre>
<p>Printing a generic will show you which methods are currently defined:</p>
<p><code>{r} describe</code></p>
<p>And you can use <code>method()</code> to retrieve the implementation of one of those methods:</p>
<p><code>{r} method(describe, Pet)</code></p>
</div>
<div class="section level2">
<h2 id="id_-using-s7-in-a-package-taken-from-the-s7-package-vignettes"># Using S7 in a package (taken from the S7 package vignettes)<a class="anchor" aria-label="anchor" href="#id_-using-s7-in-a-package-taken-from-the-s7-package-vignettes"></a></h2>
<p>title: “Using S7 in a package” output: rmarkdown::html_vignette vignette: &gt; % % % —</p>
<p><code>{r, include = FALSE} knitr::opts_chunk$set(   collapse = TRUE,   comment = "#&gt;" )</code></p>
<p>This vignette outlines the most important things you need to know about using S7 in a package. S7 is new, so few people have used it in a package yet; this means that this vignette is likely incomplete, and we’d love your help to make it better. Please <a href="https://github.com/RConsortium/S7/issues/new" class="external-link">let us know</a> if you have questions that this vignette doesn’t answer.</p>
<p><code>{r setup} library(S7)</code></p>
</div>
<div class="section level2">
<h2 id="method-registration">Method registration<a class="anchor" aria-label="anchor" href="#method-registration"></a></h2>
<p>You should always call <code>methods_register()</code> in your <code>.onLoad()</code>:</p>
<p><code>{r} .onLoad &lt;- function(...) {   S7::methods_register() }</code></p>
<p>This is S7’s way of registering methods, rather than using export directives in your <code>NAMESPACE</code> like S3 and S4 do. This is only strictly necessary if registering methods for generics in other packages, but there’s no harm in adding it and it ensures that you won’t forget later. (And if you’re not importing S7 into your namespace it will quiet an <code>R CMD check</code> <code>NOTE</code>.<code>)</code></p>
</div>
<div class="section level2">
<h2 id="documentation-and-exports">Documentation and exports<a class="anchor" aria-label="anchor" href="#documentation-and-exports"></a></h2>
<p>If you want users to create instances of your class, you will need to export the class constructor. That means you will also need to document it, and since the constructor is a function, that means you have to document the arguments which will be the properties of the class (unless you have customised the constructor).</p>
<p>If you export a class, you must also set the <code>package</code> argument, ensuring that classes with the same name are disambiguated across packages.</p>
<p>You should document generics like regular functions (since they are!). If you expect others to create their own methods for your generic, you may want to include an section describing the properties that you expect all methods to have. We plan to provide an easy way to document all methods for a generic, but have not yet implemented it. You can track progress at <a href="https://github.com/RConsortium/S7/issues/167" class="external-link uri">https://github.com/RConsortium/S7/issues/167</a>.</p>
<p>We don’t currently have any recommendations on documenting methods. There’s no need to document them in order to pass <code>R CMD check</code>, but obviously there are cases where it’s nice to provide additional details for a method, particularly if it takes extra arguments compared to the generic. We’re tracking that issue at <a href="https://github.com/RConsortium/S7/issues/315" class="external-link uri">https://github.com/RConsortium/S7/issues/315</a>.</p>
</div>
<div class="section level2">
<h2 id="backward-compatibility">Backward compatibility<a class="anchor" aria-label="anchor" href="#backward-compatibility"></a></h2>
<p>If you are using S7 in a package <em>and</em> you want your package to work in versions of R before 4.3.0, you need to know that in these versions of R <code>@</code> only works with S4 objects. There are two workarounds. The easiest and least convenient workaround is to just <code>prop()</code> instead of <code>@</code>. Otherwise, you can conditionally make an S7-aware <code>@</code> available to your package with this custom <code>NAMESPACE</code> directive:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># enable usage of &lt;S7_object&gt;@name in package code</span></span>
<span><span class="co">#' @rawNamespace if (getRversion() &lt; "4.3.0") importFrom("S7", "@")</span></span>
<span><span class="cn">NULL</span></span></code></pre></div>
<p><code>@</code> will work for users of your package because S7 automatically attaches an environment containing the needed definition when it’s loaded.</p>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luka Koning.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

