% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils__state.R
\name{state_store_get_remove}
\alias{state_store_get_remove}
\title{Fetch and remove the single-use state entry}
\usage{
state_store_get_remove(client, state, shiny_session = NULL)
}
\arguments{
\item{client}{\link{OAuthClient} instance}

\item{state}{Plain (decrypted) state string used as the logical key}

\item{shiny_session}{Optional pre-captured Shiny session context (from
\code{capture_shiny_session_context()}) to include in audit events. Used when
calling from async workers that lack access to the reactive domain.}
}
\value{
A list with \code{browser_token}, \code{pkce_code_verifier}, and \code{nonce}.
Throws an error via \code{err_invalid_state()} if retrieval or removal fails,
or if the retrieved value is missing/malformed.
}
\description{
Retrieves the state-bound values from the client's \code{state_store} and removes
the entry to enforce single-use semantics.
}
\keyword{internal}
